2025-10-24 09:13:54.883 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-10-24 09:13:54.953 [main] INFO  org.example.Main - Starting Main using Java 23.0.1 with PID 16204 (C:\Users\danil\OneDrive\Desktop\Social_network1\target\classes started by danil in C:\Users\danil\OneDrive\Desktop\Social_network1)
2025-10-24 09:13:54.954 [main] INFO  org.example.Main - No active profile set, falling back to 1 default profile: "default"
2025-10-24 09:13:55.741 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24 09:13:55.825 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 75 ms. Found 2 JPA repository interfaces.
2025-10-24 09:13:56.375 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-24 09:13:56.391 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-24 09:13:56.393 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-24 09:13:56.394 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-10-24 09:13:56.448 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-24 09:13:56.449 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1443 ms
2025-10-24 09:13:56.585 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-24 09:13:56.720 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4b87760e
2025-10-24 09:13:56.721 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-24 09:13:56.900 [main] INFO  liquibase.database - Set default schema name to public
2025-10-24 09:13:57.428 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-24 09:13:57.489 [main] INFO  liquibase.ui - Database is up to date, no changesets to execute
2025-10-24 09:13:57.492 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-24 09:13:57.501 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-10-24 09:13:57.502 [main] INFO  liquibase.util - Run:                          0
2025-10-24 09:13:57.502 [main] INFO  liquibase.util - Previously run:              11
2025-10-24 09:13:57.502 [main] INFO  liquibase.util - Filtered out:                 0
2025-10-24 09:13:57.502 [main] INFO  liquibase.util - -------------------------------
2025-10-24 09:13:57.502 [main] INFO  liquibase.util - Total change sets:           11
2025-10-24 09:13:57.503 [main] INFO  liquibase.util - Update summary generated
2025-10-24 09:13:57.504 [main] INFO  liquibase.command - Command execution complete
2025-10-24 09:13:57.556 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24 09:13:57.628 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
2025-10-24 09:13:57.670 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-24 09:13:57.994 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24 09:13:59.144 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24 09:13:59.149 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24 09:13:59.533 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-10-24 09:13:59.562 [main] INFO  o.e.s.impl.CommunityServiceImpl - >>> EntityManager в этом экземпляре = Shared EntityManager proxy for target factory [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@2643caa6]
2025-10-24 09:13:59.562 [main] INFO  o.e.s.impl.CommunityServiceImpl - >>> Экземпляр CommunityServiceImpl = 377584557
2025-10-24 09:13:59.626 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-24 09:13:59.887 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-10-24 09:14:00.070 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-24 09:14:00.090 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-24 09:14:00.096 [main] INFO  org.example.Main - Started Main in 5.69 seconds (process running for 6.1)
2025-10-24 09:24:30.940 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-24 09:24:30.941 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-24 09:24:30.942 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-10-24 09:24:30.957 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-10-24 09:24:30.963 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-24 09:24:30.965 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-10-24 09:24:31.255 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 09:24:31.288 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 09:24:31.388 [http-nio-8080-exec-1] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-10-24 09:24:52.110 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /posts/community/2
2025-10-24 09:24:52.164 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 09:24:52.166 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 09:24:52.167 [http-nio-8080-exec-3] INFO  o.e.security.JwtAuthenticationFilter - Info: Пользователь testuser успешно аутенфицирован
2025-10-24 09:24:52.168 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /posts/community/2
2025-10-24 09:24:52.177 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.admin_id,c1_0.created_at,c1_0.description,c1_0.name from Communities c1_0 where c1_0.id=?
2025-10-24 09:24:52.373 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.author_id,p1_0.community_id,p1_0.content,p1_0.created_at from Posts p1_0 where p1_0.community_id=?
2025-10-24 09:24:52.379 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from Users u1_0 left join user_roles r1_0 on u1_0.id=r1_0.user_id left join Roles r1_1 on r1_1.id=r1_0.role_id where u1_0.id=?
2025-10-24 09:24:52.381 [http-nio-8080-exec-3] INFO  o.e.service.impl.PostServiceImpl - Info: найдено постов сообщества 2: 1
2025-10-24 09:32:09.943 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /comment
2025-10-24 09:32:09.949 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 09:32:09.951 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 09:32:09.952 [http-nio-8080-exec-6] INFO  o.e.security.JwtAuthenticationFilter - Info: Пользователь testuser успешно аутенфицирован
2025-10-24 09:32:09.953 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /comment
2025-10-24 09:32:09.957 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from Users u1_0 left join user_roles r1_0 on u1_0.id=r1_0.user_id left join Roles r1_1 on r1_1.id=r1_0.role_id where u1_0.id=?
2025-10-24 09:32:09.959 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.author_id,p1_0.community_id,p1_0.content,p1_0.created_at from Posts p1_0 where p1_0.id=?
2025-10-24 09:32:09.982 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - insert into Comments (author_id,content,created_at,post_id) values (?,?,?,?)
2025-10-24 09:32:09.997 [http-nio-8080-exec-6] INFO  o.e.service.impl.CommentServiceImpl - Info: комментарий добавлен пользователем 1 к посту 1
2025-10-24 09:32:45.811 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /comment
2025-10-24 09:32:45.816 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 09:32:45.818 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 09:32:45.820 [http-nio-8080-exec-7] INFO  o.e.security.JwtAuthenticationFilter - Info: Пользователь testuser успешно аутенфицирован
2025-10-24 09:32:45.820 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /comment
2025-10-24 09:32:45.821 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from Users u1_0 left join user_roles r1_0 on u1_0.id=r1_0.user_id left join Roles r1_1 on r1_1.id=r1_0.role_id where u1_0.id=?
2025-10-24 09:32:45.823 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.author_id,p1_0.community_id,p1_0.content,p1_0.created_at from Posts p1_0 where p1_0.id=?
2025-10-24 09:32:45.824 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - insert into Comments (author_id,content,created_at,post_id) values (?,?,?,?)
2025-10-24 09:32:45.826 [http-nio-8080-exec-7] INFO  o.e.service.impl.CommentServiceImpl - Info: комментарий добавлен пользователем 1 к посту 2
2025-10-24 09:32:54.012 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing POST /comment
2025-10-24 09:32:54.017 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 09:32:54.018 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 09:32:54.020 [http-nio-8080-exec-8] INFO  o.e.security.JwtAuthenticationFilter - Info: Пользователь testuser успешно аутенфицирован
2025-10-24 09:32:54.020 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured POST /comment
2025-10-24 09:32:54.021 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from Users u1_0 left join user_roles r1_0 on u1_0.id=r1_0.user_id left join Roles r1_1 on r1_1.id=r1_0.role_id where u1_0.id=?
2025-10-24 09:32:54.023 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.id,p1_0.author_id,p1_0.community_id,p1_0.content,p1_0.created_at from Posts p1_0 where p1_0.id=?
2025-10-24 09:32:54.024 [http-nio-8080-exec-8] ERROR o.e.service.impl.CommentServiceImpl - Error: автор или пост не найдены (authorId = 1, postId = 3)
2025-10-24 09:32:54.028 [http-nio-8080-exec-8] WARN  org.example.GlobalExceptionHandler - IllegalArgumentException: Автор или пост не найдены
2025-10-24 09:49:33.730 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /comment/post/1
2025-10-24 09:49:33.731 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-24 09:49:33.733 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-10-24 09:49:33.742 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-10-24 09:49:33.742 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-24 09:49:33.743 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-10-24 09:50:15.986 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /comment/post/1
2025-10-24 09:50:15.992 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 09:50:15.999 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 09:50:16.004 [http-nio-8080-exec-2] INFO  o.e.security.JwtAuthenticationFilter - Info: Пользователь testuser успешно аутенфицирован
2025-10-24 09:50:16.005 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /comment/post/1
2025-10-24 09:50:16.022 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.author_id,c1_0.content,c1_0.created_at,c1_0.post_id from Comments c1_0 join Posts p1_0 on p1_0.id=c1_0.post_id where p1_0.id=?
2025-10-24 09:50:16.028 [http-nio-8080-exec-2] INFO  o.e.service.impl.CommentServiceImpl - Info: количество комментариев к посту 1 = 1
2025-10-24 09:50:20.371 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /comment/post/2
2025-10-24 09:50:20.378 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 09:50:20.381 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 09:50:20.383 [http-nio-8080-exec-1] INFO  o.e.security.JwtAuthenticationFilter - Info: Пользователь testuser успешно аутенфицирован
2025-10-24 09:50:20.383 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /comment/post/2
2025-10-24 09:50:20.386 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.author_id,c1_0.content,c1_0.created_at,c1_0.post_id from Comments c1_0 join Posts p1_0 on p1_0.id=c1_0.post_id where p1_0.id=?
2025-10-24 09:50:20.388 [http-nio-8080-exec-1] INFO  o.e.service.impl.CommentServiceImpl - Info: количество комментариев к посту 2 = 1
2025-10-24 10:00:07.992 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /chat/create/1/2
2025-10-24 10:00:08.001 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 10:00:08.004 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 10:00:08.005 [http-nio-8080-exec-5] INFO  o.e.security.JwtAuthenticationFilter - Info: Пользователь testuser успешно аутенфицирован
2025-10-24 10:00:08.006 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /chat/create/1/2
2025-10-24 10:00:08.092 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.type from Chats c1_0 join chat_participants p1_0 on c1_0.id=p1_0.chat_id join chat_participants p2_0 on c1_0.id=p2_0.chat_id where c1_0.type=? and p1_0.user_id=? and p2_0.user_id=? and (select count(1) from chat_participants p3_0 where c1_0.id=p3_0.chat_id)=2
2025-10-24 10:00:08.103 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from Users u1_0 left join user_roles r1_0 on u1_0.id=r1_0.user_id left join Roles r1_1 on r1_1.id=r1_0.role_id where u1_0.id=?
2025-10-24 10:00:08.106 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from Users u1_0 left join user_roles r1_0 on u1_0.id=r1_0.user_id left join Roles r1_1 on r1_1.id=r1_0.role_id where u1_0.id=?
2025-10-24 10:00:08.110 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - insert into Chats (type) values (?)
2025-10-24 10:00:08.114 [http-nio-8080-exec-5] INFO  o.e.service.impl.ChatServiceImpl - Создан новый приватный чат между 1 и 2
2025-10-24 10:00:08.129 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - insert into chat_participants (chat_id,user_id) values (?,?)
2025-10-24 10:00:08.132 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - insert into chat_participants (chat_id,user_id) values (?,?)
2025-10-24 10:02:24.590 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /chat/user/1
2025-10-24 10:02:24.597 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 10:02:24.600 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 10:02:24.602 [http-nio-8080-exec-8] INFO  o.e.security.JwtAuthenticationFilter - Info: Пользователь testuser успешно аутенфицирован
2025-10-24 10:02:24.602 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /chat/user/1
2025-10-24 10:02:24.607 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.type from Chats c1_0 join chat_participants p1_0 on c1_0.id=p1_0.chat_id where p1_0.user_id=?
2025-10-24 10:02:24.610 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select p1_0.chat_id,p1_1.id,p1_1.age,p1_1.created_at,p1_1.first_name,p1_1.gender,p1_1.last_name,p1_1.password,r1_0.user_id,r1_1.id,r1_1.name,p1_1.username from chat_participants p1_0 join Users p1_1 on p1_1.id=p1_0.user_id left join user_roles r1_0 on p1_1.id=r1_0.user_id left join Roles r1_1 on r1_1.id=r1_0.role_id where p1_0.chat_id=?
2025-10-24 10:02:29.427 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /chat/user/2
2025-10-24 10:02:29.433 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 10:02:29.435 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 10:02:29.437 [http-nio-8080-exec-9] INFO  o.e.security.JwtAuthenticationFilter - Info: Пользователь testuser успешно аутенфицирован
2025-10-24 10:02:29.438 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /chat/user/2
2025-10-24 10:02:29.440 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.type from Chats c1_0 join chat_participants p1_0 on c1_0.id=p1_0.chat_id where p1_0.user_id=?
2025-10-24 10:02:29.442 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select p1_0.chat_id,p1_1.id,p1_1.age,p1_1.created_at,p1_1.first_name,p1_1.gender,p1_1.last_name,p1_1.password,r1_0.user_id,r1_1.id,r1_1.name,p1_1.username from chat_participants p1_0 join Users p1_1 on p1_1.id=p1_0.user_id left join user_roles r1_0 on p1_1.id=r1_0.user_id left join Roles r1_1 on r1_1.id=r1_0.role_id where p1_0.chat_id=?
2025-10-24 10:04:41.455 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /messages/send/1/1
2025-10-24 10:04:41.461 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 10:04:41.465 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 10:04:41.466 [http-nio-8080-exec-1] INFO  o.e.security.JwtAuthenticationFilter - Info: Пользователь testuser успешно аутенфицирован
2025-10-24 10:04:41.467 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /messages/send/1/1
2025-10-24 10:04:41.471 [http-nio-8080-exec-1] ERROR org.example.GlobalExceptionHandler - Unhandled exception
org.springframework.http.converter.HttpMessageNotReadableException: Required request body is missing: public org.springframework.http.ResponseEntity<org.example.dto.MessageDTO> org.example.controller.MessageController.sendMessage(java.lang.Long,java.lang.Long,org.example.dto.MessageDTO)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:179)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:150)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:227)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:181)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.example.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:60)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
2025-10-24 10:19:05.005 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /messages/send/1/1
2025-10-24 10:19:05.013 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 10:19:05.020 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 10:19:05.025 [http-nio-8080-exec-4] INFO  o.e.security.JwtAuthenticationFilter - Info: Пользователь testuser успешно аутенфицирован
2025-10-24 10:19:05.026 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /messages/send/1/1
2025-10-24 10:19:05.035 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.type from Chats c1_0 where c1_0.id=?
2025-10-24 10:19:05.039 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from Users u1_0 left join user_roles r1_0 on u1_0.id=r1_0.user_id left join Roles r1_1 on r1_1.id=r1_0.role_id where u1_0.id=?
2025-10-24 10:19:05.045 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - insert into Messages (chat_id,content,sender_id,created_at) values (?,?,?,?)
2025-10-24 10:19:05.078 [http-nio-8080-exec-4] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 42703
2025-10-24 10:19:05.078 [http-nio-8080-exec-4] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ОШИБКА: столбец "created_at" в таблице "messages" не существует
  Позиция: 49
2025-10-24 10:19:05.090 [http-nio-8080-exec-4] ERROR org.example.GlobalExceptionHandler - Unhandled exception
org.hibernate.exception.SQLGrammarException: could not execute statement [ОШИБКА: столбец "created_at" в таблице "messages" не существует
  Позиция: 49] [insert into Messages (chat_id,content,sender_id,created_at) values (?,?,?,?)]
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:91)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performInsert(GetGeneratedKeysDelegate.java:107)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorPostInsertSingleTable.execute(MutationExecutorPostInsertSingleTable.java:100)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:175)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:113)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2868)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:670)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:272)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:386)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:300)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:219)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:134)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:754)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:738)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:364)
	at jdk.proxy2/jdk.proxy2.$Proxy129.persist(Unknown Source)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:320)
	at jdk.proxy2/jdk.proxy2.$Proxy129.persist(Unknown Source)
	at org.example.service.impl.MessageServiceImpl.sendMessage(MessageServiceImpl.java:51)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at org.example.service.impl.MessageServiceImpl$$SpringCGLIB$$0.sendMessage(<generated>)
	at org.example.controller.MessageController.sendMessage(MessageController.java:21)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.example.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:60)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.postgresql.util.PSQLException: ОШИБКА: столбец "created_at" в таблице "messages" не существует
  Позиция: 49
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2733)
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2420)
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:372)
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:517)
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:434)
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194)
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:194)
	... 139 common frames omitted
2025-10-24 10:22:59.167 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-10-24 10:22:59.266 [main] INFO  org.example.Main - Starting Main using Java 23.0.1 with PID 16256 (C:\Users\danil\OneDrive\Desktop\Social_network1\target\classes started by danil in C:\Users\danil\OneDrive\Desktop\Social_network1)
2025-10-24 10:22:59.267 [main] INFO  org.example.Main - No active profile set, falling back to 1 default profile: "default"
2025-10-24 10:23:00.451 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24 10:23:00.564 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 102 ms. Found 2 JPA repository interfaces.
2025-10-24 10:23:01.291 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-24 10:23:01.310 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-24 10:23:01.314 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-24 10:23:01.314 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-10-24 10:23:01.395 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-24 10:23:01.397 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2057 ms
2025-10-24 10:23:01.561 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-24 10:23:01.743 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@70b6db83
2025-10-24 10:23:01.746 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-24 10:23:01.976 [main] INFO  liquibase.database - Set default schema name to public
2025-10-24 10:23:02.725 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-24 10:23:02.818 [main] INFO  liquibase.ui - Database is up to date, no changesets to execute
2025-10-24 10:23:02.821 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-24 10:23:02.834 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-10-24 10:23:02.834 [main] INFO  liquibase.util - Run:                          0
2025-10-24 10:23:02.835 [main] INFO  liquibase.util - Previously run:              11
2025-10-24 10:23:02.835 [main] INFO  liquibase.util - Filtered out:                 0
2025-10-24 10:23:02.835 [main] INFO  liquibase.util - -------------------------------
2025-10-24 10:23:02.835 [main] INFO  liquibase.util - Total change sets:           11
2025-10-24 10:23:02.837 [main] INFO  liquibase.util - Update summary generated
2025-10-24 10:23:02.839 [main] INFO  liquibase.command - Command execution complete
2025-10-24 10:23:02.905 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24 10:23:03.012 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
2025-10-24 10:23:03.069 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-24 10:23:03.499 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24 10:23:05.134 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24 10:23:05.139 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24 10:23:05.625 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-10-24 10:23:05.665 [main] INFO  o.e.s.impl.CommunityServiceImpl - >>> EntityManager в этом экземпляре = Shared EntityManager proxy for target factory [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@6d7005e2]
2025-10-24 10:23:05.666 [main] INFO  o.e.s.impl.CommunityServiceImpl - >>> Экземпляр CommunityServiceImpl = 1141720517
2025-10-24 10:23:05.755 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-24 10:23:06.106 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-10-24 10:23:06.369 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-24 10:23:06.393 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-24 10:23:06.402 [main] INFO  org.example.Main - Started Main in 7.846 seconds (process running for 8.395)
2025-10-24 10:25:42.918 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-24 10:25:42.919 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-24 10:25:42.920 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-10-24 10:25:42.947 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /messages/send/1/1
2025-10-24 10:25:43.041 [http-nio-8080-exec-1] WARN  o.e.security.JwtAuthenticationFilter - Невалидный JWT-токен
2025-10-24 10:25:43.049 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-10-24 10:25:43.052 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-24 10:25:43.055 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-10-24 10:26:10.762 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /auth/login
2025-10-24 10:26:10.763 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-24 10:26:10.764 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /auth/login
2025-10-24 10:26:11.144 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 10:26:11.175 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 10:26:11.293 [http-nio-8080-exec-2] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-10-24 10:26:42.334 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /messages/send/1/1
2025-10-24 10:26:42.383 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 10:26:42.386 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 10:26:42.388 [http-nio-8080-exec-4] INFO  o.e.security.JwtAuthenticationFilter - Info: Пользователь testuser успешно аутенфицирован
2025-10-24 10:26:42.389 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /messages/send/1/1
2025-10-24 10:26:42.409 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.type from Chats c1_0 where c1_0.id=?
2025-10-24 10:26:42.414 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from Users u1_0 left join user_roles r1_0 on u1_0.id=r1_0.user_id left join Roles r1_1 on r1_1.id=r1_0.role_id where u1_0.id=?
2025-10-24 10:26:42.459 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - insert into messages (chat_id,content,sender_id,sent_at) values (?,?,?,?)
2025-10-24 10:26:42.475 [http-nio-8080-exec-4] INFO  o.e.service.impl.MessageServiceImpl - Info: сообщение отправлено в чат 1 от пользователя 1 с id (message = 1)
2025-10-24 10:27:51.538 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /messages/send/1/2
2025-10-24 10:27:51.544 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 10:27:51.547 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 10:27:51.549 [http-nio-8080-exec-7] INFO  o.e.security.JwtAuthenticationFilter - Info: Пользователь testuser успешно аутенфицирован
2025-10-24 10:27:51.549 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /messages/send/1/2
2025-10-24 10:27:51.551 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.type from Chats c1_0 where c1_0.id=?
2025-10-24 10:27:51.554 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,r1_0.user_id,r1_1.id,r1_1.name,u1_0.username from Users u1_0 left join user_roles r1_0 on u1_0.id=r1_0.user_id left join Roles r1_1 on r1_1.id=r1_0.role_id where u1_0.id=?
2025-10-24 10:27:51.556 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - insert into messages (chat_id,content,sender_id,sent_at) values (?,?,?,?)
2025-10-24 10:27:51.557 [http-nio-8080-exec-7] INFO  o.e.service.impl.MessageServiceImpl - Info: сообщение отправлено в чат 1 от пользователя 2 с id (message = 2)
2025-10-24 10:31:45.332 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /messages/between/1/2
2025-10-24 10:31:45.333 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-24 10:31:45.334 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-10-24 10:31:45.335 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-10-24 10:31:45.336 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-24 10:31:45.336 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.Http403ForbiddenEntryPoint - Pre-authenticated entry point called. Rejecting access
2025-10-24 10:32:00.118 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /messages/between/1/2
2025-10-24 10:32:00.125 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 10:32:00.128 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 10:32:00.130 [http-nio-8080-exec-3] INFO  o.e.security.JwtAuthenticationFilter - Info: Пользователь testuser успешно аутенфицирован
2025-10-24 10:32:00.130 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /messages/between/1/2
2025-10-24 10:32:00.464 [http-nio-8080-exec-3] WARN  org.example.GlobalExceptionHandler - IllegalArgumentException: org.hibernate.query.sqm.UnknownPathException: Could not resolve attribute 'isGroup' of 'org.example.entity.Chat' [SELECT c FROM Chat c JOIN c.participants p1 JOIN c.participants p2 WHERE p1.id = :userId1 AND p2.id = :userId2 AND c.isGroup = false]
2025-10-24 10:38:01.819 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.2.Final
2025-10-24 10:38:01.908 [main] INFO  org.example.Main - Starting Main using Java 23.0.1 with PID 14056 (C:\Users\danil\OneDrive\Desktop\Social_network1\target\classes started by danil in C:\Users\danil\OneDrive\Desktop\Social_network1)
2025-10-24 10:38:01.910 [main] INFO  org.example.Main - No active profile set, falling back to 1 default profile: "default"
2025-10-24 10:38:02.932 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-24 10:38:03.039 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 96 ms. Found 2 JPA repository interfaces.
2025-10-24 10:38:03.737 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-24 10:38:03.753 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-24 10:38:03.756 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-24 10:38:03.757 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-10-24 10:38:03.840 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-24 10:38:03.843 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1865 ms
2025-10-24 10:38:04.011 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-24 10:38:04.173 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3dbd7107
2025-10-24 10:38:04.175 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-24 10:38:04.367 [main] INFO  liquibase.database - Set default schema name to public
2025-10-24 10:38:05.055 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-24 10:38:05.145 [main] INFO  liquibase.ui - Database is up to date, no changesets to execute
2025-10-24 10:38:05.148 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-24 10:38:05.164 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-10-24 10:38:05.165 [main] INFO  liquibase.util - Run:                          0
2025-10-24 10:38:05.165 [main] INFO  liquibase.util - Previously run:              11
2025-10-24 10:38:05.166 [main] INFO  liquibase.util - Filtered out:                 0
2025-10-24 10:38:05.166 [main] INFO  liquibase.util - -------------------------------
2025-10-24 10:38:05.166 [main] INFO  liquibase.util - Total change sets:           11
2025-10-24 10:38:05.168 [main] INFO  liquibase.util - Update summary generated
2025-10-24 10:38:05.169 [main] INFO  liquibase.command - Command execution complete
2025-10-24 10:38:05.238 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-24 10:38:05.314 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
2025-10-24 10:38:05.359 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-24 10:38:05.783 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-24 10:38:07.300 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-24 10:38:07.304 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-24 10:38:07.853 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2025-10-24 10:38:07.917 [main] INFO  o.e.s.impl.CommunityServiceImpl - >>> EntityManager в этом экземпляре = Shared EntityManager proxy for target factory [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@684a34f4]
2025-10-24 10:38:07.918 [main] INFO  o.e.s.impl.CommunityServiceImpl - >>> Экземпляр CommunityServiceImpl = 676396677
2025-10-24 10:38:08.013 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-24 10:38:08.458 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-10-24 10:38:08.786 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-24 10:38:08.813 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-24 10:38:08.824 [main] INFO  org.example.Main - Started Main in 7.63 seconds (process running for 8.172)
2025-10-24 10:38:24.277 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-24 10:38:24.278 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-24 10:38:24.280 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-10-24 10:38:24.308 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /messages/between/1/2
2025-10-24 10:38:24.633 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.age,u1_0.created_at,u1_0.first_name,u1_0.gender,u1_0.last_name,u1_0.password,u1_0.username from Users u1_0 where u1_0.username=?
2025-10-24 10:38:24.682 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.id,r1_1.name from user_roles r1_0 join Roles r1_1 on r1_1.id=r1_0.role_id where r1_0.user_id=?
2025-10-24 10:38:24.699 [http-nio-8080-exec-1] INFO  o.e.security.JwtAuthenticationFilter - Info: Пользователь testuser успешно аутенфицирован
2025-10-24 10:38:24.704 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /messages/between/1/2
2025-10-24 10:38:25.057 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select c1_0.id,c1_0.type from chats c1_0 join chat_participants p1_0 on c1_0.id=p1_0.chat_id join chat_participants p2_0 on c1_0.id=p2_0.chat_id where p1_0.user_id=? and p2_0.user_id=? and c1_0.type=?
2025-10-24 10:38:25.095 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select m1_0.id,m1_0.chat_id,m1_0.content,m1_0.sender_id,m1_0.sent_at from messages m1_0 where m1_0.chat_id=? order by m1_0.sent_at
2025-10-24 10:38:25.105 [http-nio-8080-exec-1] INFO  o.e.service.impl.MessageServiceImpl - Info: найдено 2 сообщений между пользователями 1 и 2
